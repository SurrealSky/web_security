HTTPS
========================================

简介
----------------------------------------
HTTPS（HyperText Transfer Protocol over Secure Socket Layer）可以理解为HTTP+SSL/TLS， 即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL。

交互
----------------------------------------

证书验证阶段
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 浏览器发起 HTTPS 请求
- 服务端返回 HTTPS 证书
    - 其中证书包含：
        - 颁发机构信息
        - 公钥
        - 公司信息
        - 域名
        - 有效期
        - 指纹
- 客户端验证证书是否合法，如果不合法则提示告警
	- 验证域名、有效期等信息是否正确。证书上都有包含这些信息，比较容易完成验证；
	- 判断证书来源是否合法。每份签发证书都可以根据验证链查找到对应的根证书，操作系统、浏览器会在本地存储权威机构的根证书，利用本地根证书可以对对应机构签发证书完成来源验证；
	- 判断证书是否被篡改。需要与 CA 服务器进行校验；
	- 判断证书是否已吊销。通过CRL（Certificate Revocation List 证书注销列表）和 OCSP（Online Certificate Status Protocol 在线证书状态协议）实现，其中 OCSP 可用于第3步中以减少与 CA 服务器的交互，提高验证效率。

数据传输阶段
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 当证书验证合法后，在本地生成随机数
- 通过公钥加密随机数，并把加密后的随机数传输到服务端
- 服务端通过私钥对随机数进行解密
- 服务端通过客户端传入的随机数构造对称加密算法，对返回结果内容进行加密后传输