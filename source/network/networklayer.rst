网络层原理及协议
========================================

简介
----------------------------------------
网络层被设计为一个分组交换网，报文在源点被分割成便于管理的分组，通常称为数据报，然后逐个将这些数据报从源点传送到终点，终点接收到的数据报经过组装后重新生成原始的报文。因特网的网络层在最初设计时只提供无连接的服务，不过最近的趋势是向面向连接的服务转变。

分组交换
----------------------------------------

无连接服务
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 同一报文分组之间没有关联
- 同一报文的不同分组可能沿着不同路径到达终点

::

	转发方式：基于目的地址。
	依据：主机或路由器中的路由表。

面向连接的服务
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 先建立虚连接指定分组经过的路径
- 同一报文分组之间具有关联
- 分组包含虚电路标识符，是分组转发的依据
- 建链，数据传送，拆链

::

	转发方式：基于标记。
	依据：附加在分组上的标记。如多协议标记交换（Multi-Protocol Label Switching,MPLS）。

网络层的服务
----------------------------------------

逻辑编址
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- IPv4
- IPv6

源计算机提供的服务
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 分组化处理
- 查找下一跳的逻辑地址
- 查找下一跳的MAC地址
- 分片

路由器提供的服务
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 数据报有效性检查
- 查找下一跳的逻辑地址
- 查找下一跳的MAC地址
- 分片

目的计算机提供的服务
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 数据报有效性检查
- 重组
- 上层交付

其它
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 差错控制
- 流量控制
- 拥塞控制

IP网和ATM网
----------------------------------------

区别
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- IP是面向非连接的，有相应的地址和选路功能，在进行任何数据传输之前，必须在两个通信实体之间建立一条端到端的连接;
- ATM是面向连接的，有自己的地址结构、选路方式和信令，它不需要在每个中间节点(交换机)为分组(信元)确定路由，在进行任何数据交换之前，两个通信实体之间的网络通路已经计算好，并且在整个连接期间保持不变。

融合
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- 重叠模型
	它将IP当成一个网络与ATM网络互联，不更改ATM网络的协议模块，而将IP协议的功能层叠加在ATM上。也就是说，在重叠模型中，IP协议是重叠在ATM上运行的，它需要定义两套地址结构及选路协议，同时需要两套维护和管理功能，ATM系统既要分配IP地址，也要分配ATM地址，所有在ATM网络上工作的协议均需解析协议，将高层地址(IP地址)与相应的ATM地址联系起来。

- 集成模型
	它将ATM单元实体与ATM网络地址分配策略和路由选择协议分高，ATM网络实体采用与IP协议完全相同的协议体系和地址分配策略，ATM系统仅需标识IP地址，网络不再需要ATM的地址解析规程。

IPSec
----------------------------------------